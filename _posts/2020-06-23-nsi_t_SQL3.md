---
keywords: fastai
description: Cours NSI Terminale - Thème 2.
title: SQL 3/3
toc: true 
badges: true
comments: false
categories: [NSI, Terminale, Bases de données, SQL, TP]
image: /images/nsi2.png
nb_path: _notebooks/2020-06-23-nsi_t_SQL3.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-06-23-nsi_t_SQL3.ipynb
-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Manipuler-les-donn&#233;es-avec-SQL">Manipuler les donn&#233;es avec SQL<a class="anchor-link" href="#Manipuler-les-donn&#233;es-avec-SQL"> </a></h1><p>Dans ce dernier TP, nous allons voir comment insérer, mettre à jour ou supprimer des enregistrements dans des tables.</p>
<p>Commencez par valider les cellules suivantes afin d'activer la fonctionnalité SQL de Jupyter et de ncharger la base du TP précédent.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> sql

<span class="o">%</span><span class="k">sql</span> sqlite:///livres_db
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Ins&#233;rer-un-enregistrement-dans-une-table">Ins&#233;rer un enregistrement dans une table<a class="anchor-link" href="#Ins&#233;rer-un-enregistrement-dans-une-table"> </a></h2><p>Nous avons déjà rencontré cerre requète <strong>INSERT</strong>. Elle s'applique que la table soit vide ou nom. On peut très bien ajouter par exemple une troisième langue dans notre table <strong>Langues</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">sql</span> INSERT INTO Langues (Langue) VALUES(&#39;Klingon&#39;);
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Vérifions :</span>
<span class="o">%</span><span class="k">sql</span> SELECT * FROM Langues;
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mise-a-jour,-effacement-:-UPDATE-et-DELETE">Mise a jour, effacement : UPDATE et DELETE<a class="anchor-link" href="#Mise-a-jour,-effacement-:-UPDATE-et-DELETE"> </a></h2><p>Les requêtes <strong>UPDATE</strong> et <strong>DELETE</strong> fonctionnent sur le même modèle que les requêtes <strong>SELECT</strong>.  Attention, on a vite fait d'effacer toutes ses données si on ne configure pas bien sa requête. Une bonne habitude à prendre est de tester d'abord ses critères à l'aide d'un <strong>SELECT</strong>.</p>
<p>Observez les exemples ci-dessous :</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT IdAuteur FROM Auteurs WHERE IdAuteur = 10;
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>C'est bien lui !!</p>
<p>Modifions le nom de l'auteur grâce à une requête de mise à jour :</p>
<p><strong>UPDATE</strong> <em>table</em> <br>
<strong>SET</strong>  <em>attribut1</em> = <em>valeur1</em>, <em>attribut2</em> = <em>valeur2</em>, ...<br>
<strong>WHERE</strong> <em>critère</em>;</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">sql</span> 

UPDATE Auteurs 
SET NomAuteur = &quot;Ze Djoule&quot;, PrenomAuteur = &quot;Juju&quot;
WHERE IdAuteur=10;

SELECT * FROM Auteurs ;
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>supprimons vite cette entrée ! Nous utiliseerons une requête
<strong>DELETE FROM</strong> <em>table</em> <strong>WHERE</strong> <em>critere</em></p>
<p><strong>Attention</strong> : soyez bien sûr de votre critère sous peine de perdre des données importantes !</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">sql</span> 

DELETE  FROM Auteurs  WHERE IdAuteur=10;

SELECT * FROM Auteurs;
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Attention-&#224;-la-coh&#233;rence-des-donn&#233;es">Attention &#224; la coh&#233;rence des donn&#233;es<a class="anchor-link" href="#Attention-&#224;-la-coh&#233;rence-des-donn&#233;es"> </a></h3><p>Dans une base de données relationnelle il faut être vigilant lors de la suppression d'enregistrements : en effet la suppression d'en enregistement entraîne la suppression de sa clé primaire qui peut être utilisée en tant que clé externe dans une autre table. Cela entraîne la corruption des données. Observez l'exemple ci-dessous dans lequel je me suis atribué un livre célèbre sans toucher à la table <strong>Livres</strong></p>
<p>Il existe en SQL des moyens pour se prémunir de ce type de problèmes mais cela dépasse le cadre de ce cours.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">sql</span>
INSERT INTO Auteurs 
    (NomAuteur, PrenomAuteur, IdLangue, AnneeNaissance) 
VALUES
    (&quot;Lecluse&quot;, &quot;Olivier&quot;, 2, 1850);
    
SELECT Titre, NomAuteur from Livres JOIN Auteurs USING (IdAuteur);
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="A-vous-de-jouer">A vous de jouer<a class="anchor-link" href="#A-vous-de-jouer"> </a></h3><ol>
<li>Réinsérez l'auteur Jules Verne à sa place !</li>
<li>Supprimez tous les livres écrits au 19e sciecle</li>
</ol>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">sql</span>

/* 
# YOUR CODE HERE
raise NotImplementedError()
*/
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="o">%</span><span class="k">sql</span> SELECT Titre, NomAuteur AnneePubli from Livres JOIN Auteurs USING (IdAuteur);
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">15</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

