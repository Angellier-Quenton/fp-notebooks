---
keywords: fastai
description: Notion de variable locale/globale, références partagées et objets mutables
title: Utilisation avancée des variables
toc: true
badges: true
comments: false
categories: [python, ISN]
nb_path: _notebooks/2020-03-07-Python4 - Utilisation avanceee des variables.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-03-07-Python4 - Utilisation avanceee des variables.ipynb
-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>En Python, les variables sont crées automatiquement à leur première utilisation. Pour créer une variable, il
suffit donc de l’utiliser en l’affectant une première fois, c’est à dire d’écrire <em>nom_variable=valeur_de_la_variable</em>.
Une variable peut prendre n’importe quel nom, tant qu’elle respecte les règles suivantes :</p>
<ul>
<li>Son nom commence de préférence par une lettre minuscule (a à z) ou majuscule (A à Z), ou bien par le
caractère souligné (_)</li>
<li>Pour la suite de son nom, on peut utiliser les lettres minuscules et majuscule, le souligné et un chiffre (0
à 9)</li>
<li>Il faut éviter de préférence d’utiliser un mot réservé (commande Python)</li>
</ul>
<p>Avant de commencer, validez la cellule suivante qui nous permettra d'accéder à un outil très pratique : <strong>Python tutor</strong>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">metakernel</span> <span class="kn">import</span> <span class="n">register_ipython_magics</span>
<span class="n">register_ipython_magics</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Affectations---rappels">Affectations - rappels<a class="anchor-link" href="#Affectations---rappels"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span><span class="o">=</span><span class="mi">7</span> <span class="c1"># Affectation simple</span>
<span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="o">=</span><span class="mi">7</span> <span class="c1"># Affectation multiple</span>
<span class="n">z</span><span class="p">,</span><span class="n">t</span><span class="o">=</span><span class="s2">&quot;toto&quot;</span><span class="p">,</span><span class="mi">8</span> <span class="c1"># Affectation en parallèle</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Variables-locales---Variables-globales">Variables locales - Variables globales<a class="anchor-link" href="#Variables-locales---Variables-globales"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Variables-locales">Variables locales<a class="anchor-link" href="#Variables-locales"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Une <em>variable locale</em> est une variable définie à l’<strong>intérieur d’une fonction</strong>. Elle n’est utilisable qu’à l’intérieur
de celle-ci, le reste du programme <strong>ignorant totalement</strong> son existence.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Cet exemple illustre le mécanisme de variable locale et de passage de paramètre. La variable locale <strong>varLoc</strong> est
utilisable à l’intérieur de la fonction <em>maFonction</em> et remplit son rôle.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">maFonction</span><span class="p">(</span><span class="n">param</span><span class="p">):</span>
    <span class="n">varLoc</span><span class="o">=</span><span class="mi">4</span>
    <span class="n">varLoc</span><span class="o">=</span><span class="n">varLoc</span><span class="o">+</span><span class="n">param</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">varLoc</span><span class="p">)</span>

<span class="n">maFonction</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Néanmoins, cette variable n'a plus d'existance à l'extérieur de la fonction.
Exécutez le code suivant et trouver dans le message d'erreur ce qui prouve que la variable locale est détruite en sortant de la fonction.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">maFonction</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">varLoc</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Variables-globales">Variables globales<a class="anchor-link" href="#Variables-globales"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Il existe des cas ou on souhaite qu'une variable soit persistante tout au long de la vie du programme, quelque soit la fonction qui l'utilise. C'est ce qu'on appelle une <em>variable globale</em>.</p>
<p>Il faut être assez prudent dans l'utilisation de ces variables : une trop grande quantité de variables globales rend le programme difficile à lire et à maintenir. C'est une technique de programmation peu élégante.</p>
<p>On préfère en général avoir recours à des <strong>objets</strong> (voir le classeur sur la programmation orientée objet).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Une <em>variable globale</em> est définie dans le programme principal (souvent au début dans la section d’initialisa-
tion). Elle est par défaut <strong>accessible en lecture seule dans l’ensemble des fonctions</strong> définies dans le programme :</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">varGlo</span><span class="o">=</span><span class="mi">5</span>
<span class="k">def</span> <span class="nf">maFonction1</span><span class="p">():</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;varGlo dans fonction1&quot;</span><span class="p">,</span><span class="n">varGlo</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">maFonction2</span><span class="p">():</span>
    <span class="n">varGlo</span><span class="o">=</span><span class="mi">4</span>
    <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;varGlo dans fonction2&quot;</span><span class="p">,</span><span class="n">varGlo</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Debut programme principal&quot;</span><span class="p">,</span><span class="n">varGlo</span><span class="p">)</span>
<span class="n">maFonction1</span><span class="p">()</span>
<span class="n">maFonction2</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fin programme principal&quot;</span><span class="p">,</span><span class="n">varGlo</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Afin de bien comprendre ce qui s'est passé, revoyons l'exécution de cette cellule au ralenti :</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">tutor</span>
varGlo=5
def maFonction1():
    print (&quot;varGlo dans fonction1&quot;,varGlo)

def maFonction2():
    varGlo=4
    print (&quot;varGlo dans fonction2&quot;,varGlo)

print(&quot;Debut programme principal&quot;,varGlo)
maFonction1()
maFonction2()
print(&quot;Fin programme principal&quot;,varGlo)
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Vous constaterez dans l'exemple ci-dessus que
-<em>varGlo</em> est <strong>accessible en lecture</strong> dans <em>maFonction1</em>
-<em>varGlo</em> <strong>a pu être modifiée</strong> dans <em>maFonction2</em>
-les modifications de <em>varGlo</em> dans <em>maFonction2</em> n'ont <strong>pas été répercutées</strong> dans le programme principal !</p>
<p>On peut avoir l'impression en lisant le code que <em>varGlo</em> prend la valeur 4 dès que <em>maFonction2</em> est exécutée. En réalité, maFonction2 va créer une variable locale de même nom que varGlo qui n'aura d'existance qu'à l'intérieur de la fonction. La variable globale varGlo créée au début du programme, elle, est <strong>inchangée</strong>.</p>
<p>Voila pourquoi il faut être prudent quant à l'utilisation des variables globales.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Modifier-une-variable-globale-dans-une-fonction">Modifier une variable globale dans une fonction<a class="anchor-link" href="#Modifier-une-variable-globale-dans-une-fonction"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Il est bien sûr possible de modifier le contenu d'une variable globale à l'intérieur d'une fonction. Pour ce faire, on utilisera la commande python <strong>global</strong> pour indiquer à la fonction  les variables globales accessibles en modification.</p>
<p>Etudiez l'exemple suivant :</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">varGlo</span><span class="o">=</span><span class="mi">5</span>

<span class="k">def</span> <span class="nf">maFonction3</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">varGlo</span>
    <span class="n">varGlo</span><span class="o">=</span><span class="mi">4</span>

<span class="n">maFonction3</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">## Que vaut varGlo après appel de maFonction3 ?</span>
<span class="c1">## indiquez votre réponse dans la variable réponse</span>

<span class="n">reponse</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">varGlo</span> <span class="o">==</span> <span class="n">reponse</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Exercice">Exercice<a class="anchor-link" href="#Exercice"> </a></h2><ul>
<li>Créer une variable <em>globale</em> nbCoups initialisée à 0</li>
<li>Ecrire une fonction <strong>trouve</strong><ul>
<li>prenant en paramètre un entier n</li>
<li>créant une variable locale <em>inc</em> qui est un entier aléatoire entre 1 et 10</li>
<li>renvoyant True si $n$ est égal à <em>inc</em>, False sinon</li>
<li>le nombre de coups devra être incrémenté à chaque appel de la fonction</li>
</ul>
</li>
</ul>
<p>Combien de coups vous a t-il fallu pour tomber sur le nombre choisi pr l'ordinateur ?</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">trouve</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nbCoups</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nbCoups</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">trouve</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">nbCoups</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Les-r&#233;f&#233;rences-partag&#233;es-:-le-cas-des-listes">Les r&#233;f&#233;rences partag&#233;es : le cas des listes<a class="anchor-link" href="#Les-r&#233;f&#233;rences-partag&#233;es-:-le-cas-des-listes"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Les listes Python sont des <strong>références</strong>, c’est à dire que écrire a = [(1,0,0),(0,1,0),(0,0,1)] ne
signifie pas que a <em>vaut</em> [(1,0,0),(0,1,0),(0,0,1)] mais que a <em>référence</em> la liste [(1,0,0),(0,1,0),(0,0,1)], c'est à dire contient un <em>pointeur vers la zone mémoire qui contient cette liste</em>.</p>
<p>La subtilité est que la commande <em>b = a</em> ne va pas duppliquer le contenu de la liste mais <strong>recopier une référence sur cette même liste</strong>. Si on modifie b, alors a <strong>sera également modifié</strong>.</p>
<p>L’examen des deux exemples suivant illustre ce concept.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)]</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;a=&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="c1"># On copie la référence, pas la liste</span>

<span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># On modifie b</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;a=&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">)</span> <span class="c1"># Ouuups !!!</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Dans l'exemple ci-dessus, la modification de $b$ entraîne sans qu'on s'y attende la modification de $a$ !!</p>
<p>Ce n'est pas un bug de Python, c'est normal quand on sait comment Python gère la mémoire.
Revoyons cette séquence au ralenti en validant la cellule suivante:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">tutor</span>
a = [(1,0,0), (0,1,0), (0,0,1)]
print (&quot;a=&quot;,a)

b = a # On copie la référence, pas la liste

b[0] = (1,1,0) # On modifie b
print(&quot;b=&quot;,b)

print(&quot;a=&quot;,a) # Ouuups !!!
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Vous le voyez, l'outil <strong>python tutor</strong> est très pratique pour observer dans le détail comment Python gère la mémoire. N'hésitez pas par la suite à l'utiliser en ajoutant <strong>%%tutor</strong> en première ligne de cellule.</p>
<p>Pour suivre l'utilisation de la mémoire, on peut aussi utiliser la commande <strong>id</strong> qui permet d'obtenir l'adresse mémoire de l'objet référencé par une variable :</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;adresse de a&quot;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;adresse de b&quot;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Tout s'explique !! <em>a</em> et <em>b</em> son un seul et même objet !</p>
<p>Mais comment faire pour obtenir dans <em>b</em> une liste identique mais indépendante de <em>a</em> ?</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;adresse de a&quot;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;adresse de b&quot;</span><span class="p">,</span><span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ah ! les adresses de <em>a</em> et de <em>b</em> sont différentes. Si je modifie <em>b</em>, <em>a</em> ne devrait pas être impacté. Vérifions le de suite !</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># On modifie b</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;b=&quot;</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;a=&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">)</span> <span class="c1"># Ouuuf !!!</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On devra donc être prudent sur l’utilisation d’une affectation du type b=a surtout lorsqu’on travaille avec des listes
ou des chaîne de caractères, des effets inattendus peuvent alors se produire.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># une erreur classique</span>
<span class="n">liste_desordre</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">liste_ordre</span><span class="o">=</span><span class="n">liste_desordre</span>
<span class="n">liste_ordre</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Liste en ordre&quot;</span><span class="p">,</span><span class="n">liste_ordre</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Liste de départ&quot;</span><span class="p">,</span><span class="n">liste_desordre</span><span class="p">)</span> <span class="c1"># oups</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Et voici comment réaliser une véritable dupplication de notre liste : on utilise la méthode <strong><em>copy()</em></strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">liste_desordre</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">liste_ordre</span><span class="o">=</span><span class="n">liste_desordre</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">liste_ordre</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Liste en ordre&quot;</span><span class="p">,</span><span class="n">liste_ordre</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Liste de départ&quot;</span><span class="p">,</span><span class="n">liste_desordre</span><span class="p">)</span> <span class="c1"># ouf</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Exercice">Exercice<a class="anchor-link" href="#Exercice"> </a></h2><p>Ecrire une fonction double1 qui prend une liste de nombre en paramètre et qui multiplie chaque élément par 2. La fonction double1 renvoie la liste doublée. La liste de départ <strong>est modifiée </strong>par cette fonction.</p>
<p>Ecrire une fonction double2 qui prend une liste de nombre en paramètre et renvoie une liste contenant les doubles de tous les éléments de la liste passée en paramètre. La liste de départ <strong>n'est pas modifiée</strong> par cette fonction.</p>
<p>Regardez la cellule de tests pour plus d'informations si nécessaire</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># YOUR CODE HERE</span>
<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Cellule de test</span>

<span class="n">liste</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">double1</span><span class="p">(</span><span class="n">liste</span><span class="p">)</span> <span class="o">==</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="c1"># double1 modifie la liste de départ</span>
<span class="k">assert</span> <span class="n">liste</span> <span class="o">==</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>

<span class="n">liste</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">double2</span><span class="p">(</span><span class="n">liste</span><span class="p">)</span> <span class="o">==</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="c1"># double2 ne modifie pas la liste de départ</span>
<span class="k">assert</span> <span class="n">liste</span> <span class="o">==</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Le-cas-des-cha&#238;nes">Le cas des cha&#238;nes<a class="anchor-link" href="#Le-cas-des-cha&#238;nes"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lorsque l'on manipule des variables contenant des chaînes de caractères, manipule t-on les références vers ces chaînes ou bien les contenus des chaînes de caractères ?</p>
<p>Le comportement des chaînes de caractères est-il identique à celui des listes ou non ?</p>
<p>En vous inspirant des manipulations faites listes mais avec des chaînes de caractères, tentez d'apporter des réponses à ces questions.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Faites vos tests ici</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lorsque on manipule des chaines de caractères, on manipule des références vers ces chaines. De ce point de vue, les chaînes se comporte comme les listes.</p>
<p>Observons si on peut avoir un <em>effet de bord</em> (modification non prévue d'une variable) :</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">chaine</span> <span class="o">=</span> <span class="s1">&#39;salut tout le monde&#39;</span>
<span class="n">autrechaine</span> <span class="o">=</span> <span class="n">chaine</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autrechaine</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;a&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Il semble que les chaînes ne puissent pas être modifiées sur place. Ce sont des objets non mutables. Cela les distingue de listes. De ce point de vue, cela nous protège des <em>effets de bord</em> constatés sur les listes.</p>
<p>Oui mais qu'en est-il de la concaténation ? en effet, on peut ajouter une chaine au bout d'une chaine et en ce sens modifier notre chaine... regardons :</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">autrechaine</span> <span class="o">+=</span> <span class="s2">&quot; est moche&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">autrechaine</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">chaine</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Tout va bien, autrechaine est modifiée mais sans effet non désiré sur chaine. Mais comment est-ce possible puisque on a modifié autrechaine ?</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">autrechaine</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">chaine</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Après ajout d'une autre chaine au bout de la variable <em>autrechaine</em>, la variable <em>autrechaine</em> pointe sur un nouvel objet. Cela prouve que les chaines de caractères sont des objets non mutables contrairement aux listes.</p>
<p>Pas de crainte d'effet de bord sur les chaines.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Conclusion">Conclusion<a class="anchor-link" href="#Conclusion"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Il y a deux grands types d'objets en python :</p>
<ul>
<li>les objets mutables</li>
<li>les objets immuables</li>
</ul>
<p>Les objets mutables sont des objets qui acceptent d'être modifiés sans avoir besoin d'être recopiés - on parle alors de modification sur place. Exemples : les listes, les dictionnaires, les ensembles.</p>
<p>Les objets immuables sont des objets qui nécessitent d'être recréés pour être modifiés. Exemple : les chaines de caractères ou les tuples.</p>
<p>Il faut être très prudent lors de la manipulation d'objets mutables à cause du problème des <strong>références partagées</strong> qui peut occasionner des <em>effets de bords</em> non désirés : modification non prévue d'autres variables que celle sur laquelle on agit.</p>

</div>
</div>
</div>
</div>
 

